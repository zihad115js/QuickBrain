<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- Monetag Verification Code -->
    <meta name="monetag" content="8678bb54816fe7bbead10f667e85da8b">

    <!-- PWA / Full Screen Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f172a">

    <title>QuickBrains - Game Of Your Brain</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&family=Orbitron:wght@500;700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-color: #0f172a;
            --primary: #38bdf8;
            --secondary: #818cf8;
            --accent: #f472b6;
            --glass: rgba(30, 41, 59, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }

        body {
            font-family: 'Poppins', 'Hind Siliguri', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            height: 100vh;
            height: 100dvh; 
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        .ambient-light {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: -1;
            background: radial-gradient(circle at 50% 50%, #1e1b4b, #0f172a);
        }
        .blob {
            position: absolute; filter: blur(90px); opacity: 0.4;
            animation: float 25s infinite alternate;
        }
        .blob-1 { top: -10%; left: -10%; width: 70vw; height: 70vw; background: var(--secondary); border-radius: 40% 60% 70% 30%; }
        .blob-2 { bottom: -10%; right: -10%; width: 80vw; height: 80vw; background: var(--primary); border-radius: 60% 40% 30% 70%; animation-delay: -5s; }
        @keyframes float { 0% { transform: translate(0, 0) rotate(0deg); } 100% { transform: translate(30px, 50px) rotate(20deg); } }

        #confetti-canvas { position: fixed; inset: 0; pointer-events: none; z-index: 100; }

        #splash {
            position: fixed; inset: 0; z-index: 50;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: rgba(15, 23, 42, 0.98); 
            transition: opacity 0.5s ease; padding: 20px;
        }

        .brand-logo {
            font-family: 'Orbitron', sans-serif; font-size: 2.5rem; font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text; color: transparent;
            margin-bottom: 5px; text-align: center; letter-spacing: 2px;
            filter: drop-shadow(0 0 25px rgba(56, 189, 248, 0.4));
        }

        .tagline { color: var(--text-muted); font-size: 0.8rem; margin-bottom: 40px; letter-spacing: 3px; text-transform: uppercase; }

        .info-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;
            margin-bottom: 40px; width: 100%; max-width: 340px;
        }
        .info-card {
            background: rgba(255, 255, 255, 0.03); border: 1px solid var(--glass-border);
            border-radius: 16px; padding: 15px 5px; text-align: center;
        }
        .info-icon { font-size: 1.4rem; margin-bottom: 8px; color: var(--primary); }
        .info-text { font-size: 0.65rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; }

        #app {
            width: 100%; max-width: 420px; height: 100%;
            display: none; flex-direction: column; 
            padding: 10px 20px 20px 20px;
            opacity: 0; transform: translateY(20px); transition: all 0.6s ease;
        }

        .app-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; min-height: 40px; }
        .level-chip {
            background: rgba(56, 189, 248, 0.15); color: var(--primary);
            padding: 5px 14px; border-radius: 30px; font-weight: 700;
            font-family: 'Orbitron', sans-serif; font-size: 0.85rem;
            border: 1px solid rgba(56, 189, 248, 0.3);
        }
        .progress-wrapper { flex: 1; margin-left: 15px; height: 6px; background: rgba(255,255,255,0.08); border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--secondary)); transition: width 0.5s ease; }

        .game-card {
            flex: 1; display: flex; flex-direction: column; justify-content: center;
            background: var(--glass); border: 1px solid var(--glass-border);
            border-radius: 24px; padding: 25px 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4); margin-bottom: 10px;
            position: relative; overflow: hidden;
            max-height: 80vh;
        }
        
        .question-area { text-align: center; margin-bottom: 25px; flex-shrink: 0; }
        .q-title { font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 5px; font-weight: 600; letter-spacing: 1.5px; }
        .q-text { font-size: 1.4rem; color: #fff; line-height: 1.3; font-weight: 600; }

        #game-interface { flex: 1; display: flex; align-items: center; justify-content: center; width: 100%; }

        .input-wrapper { position: relative; width: 100%; margin-bottom: 15px; }
        input {
            width: 100%; padding: 18px; border-radius: 16px; border: 2px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.4); color: #fff; font-size: 1.2rem; text-align: center;
            font-family: 'Orbitron', sans-serif; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); background: rgba(0,0,0,0.6); }

        #tap-btn {
            width: 130px; height: 130px; border-radius: 50%; 
            background: radial-gradient(circle, rgba(56, 189, 248, 0.1), transparent);
            border: 3px solid var(--primary); display: flex; justify-content: center; align-items: center;
            font-size: 2.5rem; font-family: 'Orbitron', sans-serif; color: #fff;
            cursor: pointer; transition: 0.1s; box-shadow: 0 0 30px rgba(56, 189, 248, 0.2);
        }
        #tap-btn:active { transform: scale(0.95); background: rgba(56, 189, 248, 0.3); }

        .controls { display: grid; grid-template-columns: 1fr 2.5fr; gap: 10px; margin-top: auto; flex-shrink: 0; width: 100%; }
        .btn {
            border: none; padding: 16px; border-radius: 14px; font-size: 0.95rem; font-weight: 600;
            cursor: pointer; transition: 0.2s; font-family: 'Poppins', sans-serif;
            display: flex; justify-content: center; align-items: center; gap: 8px;
        }
        .btn:active { transform: scale(0.96); }
        .btn-hint { background: rgba(255, 255, 255, 0.05); color: var(--text-muted); border: 1px solid var(--glass-border); }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: #0f172a; box-shadow: 0 8px 20px rgba(56, 189, 248, 0.3); }
        
        .btn-start {
            background: #fff; color: #0f172a; width: 100%; max-width: 260px;
            font-size: 1.1rem; padding: 18px; border-radius: 50px; font-weight: 700;
            box-shadow: 0 0 30px rgba(255,255,255,0.2); animation: pulse 2s infinite; cursor: pointer; border: none;
        }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(255, 255, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); } }

        #modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
            z-index: 200; display: none; align-items: center; justify-content: center;
        }
        .modal-card {
            background: #1e293b; border-radius: 24px; padding: 30px; width: 85%; max-width: 320px;
            text-align: center; border: 1px solid rgba(255,255,255,0.1);
        }
        .btn-ad { background: var(--accent); color: white; width: 100%; margin-top: 15px; }
        .btn-close { background: transparent; color: var(--text-muted); width: 100%; margin-top: 8px; border: 1px solid var(--glass-border); }

        #toast {
            position: fixed; top: 50px; left: 50%; transform: translateX(-50%) translateY(-100px);
            background: #fff; color: #0f172a; padding: 12px 24px; border-radius: 50px;
            font-weight: 600; box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 300;
            transition: 0.4s; opacity: 0; display: flex; align-items: center; gap: 10px;
        }
        #toast.active { transform: translateX(-50%) translateY(0); opacity: 1; }

        .hidden { display: none !important; }

        @media (max-height: 700px) {
            .brand-logo { font-size: 2rem; }
            .info-grid { margin-bottom: 20px; }
            .game-card { padding: 15px; }
            .q-text { font-size: 1.2rem; }
            #tap-btn { width: 100px; height: 100px; font-size: 2rem; }
            input { padding: 15px; }
        }
    </style>
</head>
<body>

    <div class="ambient-light">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>
    <canvas id="confetti-canvas"></canvas>

    <div id="splash">
        <div class="brand-logo">QuickBrains</div>
        <div class="tagline">GAME OF YOUR BRAIN</div>
        <div class="info-grid">
            <div class="info-card">
                <i class="fas fa-brain info-icon"></i>
                <div class="info-text">Brain Test</div>
            </div>
            <div class="info-card">
                <i class="fas fa-layer-group info-icon"></i>
                <div class="info-text">100 Levels</div>
            </div>
            <div class="info-card">
                <i class="fas fa-bolt info-icon"></i>
                <div class="info-text">Think Fast</div>
            </div>
        </div>
        <button class="btn btn-start" id="start-btn" onclick="enterGame()">PLAY NOW <i class="fas fa-play" style="font-size: 0.8em;"></i></button>
    </div>

    <div id="app">
        <div class="app-header">
            <div class="level-chip" id="lvl-display">LVL 01</div>
            <div class="progress-wrapper"><div class="progress-fill" id="progress"></div></div>
        </div>
        <div class="game-card">
            <div class="question-area">
                <div class="q-title" id="q-category">Puzzle</div>
                <div class="q-text" id="q-text">Loading...</div>
            </div>
            <div id="game-interface"></div>
            <div class="controls" id="btn-container">
                <button class="btn btn-hint" onclick="getHint()"><i class="fas fa-lightbulb"></i></button>
                <button class="btn btn-primary" onclick="checkAnswer()">CHECK</button>
            </div>
        </div>
    </div>

    <div id="modal-overlay">
        <div class="modal-card">
            <div style="font-size: 3rem; margin-bottom:10px;">ðŸ¤”</div>
            <h3 style="color: #fff; margin-bottom: 5px;">Wrong Answer</h3>
            <p style="color: var(--text-muted); font-size: 0.9rem;">You can watch a video to skip.</p>
            <button class="btn btn-ad" onclick="skipLevel()"><i class="fas fa-video"></i> Watch Ad & Skip</button>
            <button class="btn btn-close" onclick="closeModal()">Try Again</button>
        </div>
    </div>

    <div id="toast">
        <i class="fas fa-check-circle" style="color: var(--secondary)"></i>
        <span id="toast-msg">Success!</span>
    </div>

    <div style="display:none">
        <script src="https://resignedincidentallysurprise.com/f5/ed/b4/f5edb4a78fc0eee93c4f809373d456dd.js"></script>
    </div>

    <script>
        // --- SERVICE WORKER REGISTRATION ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('ServiceWorker registration successful');
                }).catch(err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
        // --- END OF SERVICE WORKER ---

        const LINKS = {
            SKIP: "https://resignedincidentallysurprise.com/h9zw3qxj?key=e4a0770bbc7e91ecb25af4a08d296594",
            HINT: "https://omg10.com/4/10598157"
        };
        let level = parseInt(localStorage.getItem('qb_lvl')) || 1;
        let taps = 0;
        let currentAns = "";

        window.onload = function() {
            if(level > 1) {
                document.getElementById('start-btn').innerHTML = `CONTINUE <i class="fas fa-forward" style="font-size: 0.8em;"></i>`;
            }
        };

        const levels = {
            1: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'START'", cat: "Warm Up", type: "in", a: "START" },
            2: { t: "à§§à§« + à§§à§« = à¦•à¦¤?", cat: "Math", type: "in", a: "30" },
            3: { t: "à¦†à¦•à¦¾à¦¶à§‡à¦° à¦°à¦‚ à¦•à§€? (à¦‡à¦‚à¦°à§‡à¦œà¦¿à¦¤à§‡)", cat: "General", type: "in", a: "BLUE" },
            4: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§­ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 7 },
            5: { t: "'JOY' à¦¶à¦¬à§à¦¦à¦Ÿà¦¿à¦•à§‡ à¦‰à¦²à§à¦Ÿà§‹ à¦•à¦°à§‡ à¦²à¦¿à¦–à§à¦¨", cat: "Logic", type: "in", a: "YOJ" },
            6: { t: "à¦®à¦¾à¦¨à§à¦·à§‡à¦° à¦•à§Ÿà¦Ÿà¦¿ à¦ªà¦¾ à¦¥à¦¾à¦•à§‡?", cat: "Anatomy", type: "in", a: "2" },
            7: { t: "à§« x à§® = à¦•à¦¤?", cat: "Math", type: "in", a: "40" },
            8: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'CYBER'", cat: "Typing", type: "in", a: "CYBER" },
            9: { t: "à§§à§¦à§¦ - à§«à§¦ = ?", cat: "Math", type: "in", a: "50" },
            10: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§§à§¨ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 12 },
            11: { t: "à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶à§‡à¦° à¦®à§à¦¦à§à¦°à¦¾à¦° à¦¨à¦¾à¦® à¦•à§€?", cat: "GK", type: "in", a: "à¦Ÿà¦¾à¦•à¦¾" },
            12: { t: "à§§à§¨ + à§§à§¨ = ?", cat: "Math", type: "in", a: "24" },
            13: { t: "à¦ªà§‡à¦¨à§à¦¸à¦¿à¦² à¦¦à¦¿à§Ÿà§‡ à¦•à§€ à¦•à¦°à¦¾ à¦¹à§Ÿ? (à¦²à§‡à¦–à¦¾/à¦–à¦¾à¦“à§Ÿà¦¾)", cat: "Logic", type: "in", a: "à¦²à§‡à¦–à¦¾" },
            14: { t: "à§© x à§¯ = à¦•à¦¤?", cat: "Math", type: "in", a: "27" },
            15: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'QUEST'", cat: "Typing", type: "in", a: "QUEST" },
            16: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§§à§« à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 15 },
            17: { t: "à§« + à§« + à§« = ?", cat: "Math", type: "in", a: "15" },
            18: { t: "'RED' à¦®à¦¾à¦¨à§‡ à¦•à§‹à¦¨ à¦°à¦‚?", cat: "English", type: "in", a: "à¦²à¦¾à¦²" },
            19: { t: "à§¨à§¦ - à§­ = ?", cat: "Math", type: "in", a: "13" },
            20: { t: "'MOON' à¦‰à¦²à§à¦Ÿà§‹ à¦²à¦¿à¦–à§à¦¨", cat: "Logic", type: "in", a: "NOOM" },
            21: { t: "à§« x à§« = à¦•à¦¤?", cat: "Math", type: "in", a: "25" },
            22: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'LEVEL'", cat: "Typing", type: "in", a: "LEVEL" },
            23: { t: "à¦ªà¦¾à¦¨à¦¿à¦° à¦…à¦ªà¦° à¦¨à¦¾à¦® à¦•à§€?", cat: "GK", type: "in", a: "à¦œà§€à¦¬à¦¨" },
            24: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§¨à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Endurance", type: "tap", target: 20 },
            25: { t: "à§© + à§© x à§© = à¦•à¦¤?", cat: "Tricky Math", type: "in", a: "12" },
            26: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'NEON'", cat: "Typing", type: "in", a: "NEON" },
            27: { t: "à§§ à¦®à¦¿à¦¨à¦¿à¦Ÿà§‡ à¦•à¦¤ à¦¸à§‡à¦•à§‡à¦¨à§à¦¡?", cat: "Time", type: "in", a: "60" },
            28: { t: "à§§à§¦ x à§§à§¦ = à¦•à¦¤?", cat: "Math", type: "in", a: "100" },
            29: { t: "'DOG' à¦®à¦¾à¦¨à§‡ à¦•à§€?", cat: "English", type: "in", a: "à¦•à§à¦•à§à¦°" },
            30: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§¨à§« à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 25 },
            31: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'GAMER'", cat: "Typing", type: "in", a: "GAMER" },
            32: { t: "à§§ à¦¥à§‡à¦•à§‡ à§§à§¦ à¦à¦° à¦®à¦¾à¦à§‡ à¦¬à§œ à¦œà§‹à§œ à¦¸à¦‚à¦–à§à¦¯à¦¾ à¦•à§‹à¦¨à¦Ÿà¦¿?", cat: "Logic", type: "in", a: "10" },
            33: { t: "à§ª + à§ª = à¦•à¦¤?", cat: "Math", type: "in", a: "8" },
            34: { t: "à§§ à¦¹à¦¾à¦²à¦¿ à¦•à§Ÿà¦Ÿà¦¿?", cat: "GK", type: "in", a: "4" },
            35: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'HERO'", cat: "Typing", type: "in", a: "HERO" },
            36: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§©à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 30 },
            37: { t: "'APPLE' à¦à¦° à¦ªà§à¦°à¦¥à¦® à¦…à¦•à§à¦·à¦° à¦•à§€?", cat: "English", type: "in", a: "A" },
            38: { t: "à§§à§¦à§¦ à¦à¦° à¦…à¦°à§à¦§à§‡à¦• à¦•à¦¤?", cat: "Math", type: "in", a: "50" },
            39: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'BOSS'", cat: "Typing", type: "in", a: "BOSS" },
            40: { t: "à§® + à§¨ = ?", cat: "Math", type: "in", a: "10" },
            41: { t: "à§ªà¦Ÿà¦¿ à¦•à¦®à¦²à¦¾ à¦“ à§©à¦Ÿà¦¿ à¦†à¦ªà§‡à¦² à¦®à¦¿à¦²à§‡ à¦•à§Ÿà¦Ÿà¦¿ à¦«à¦²?", cat: "Logic", type: "in", a: "7" },
            42: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'FIRE'", cat: "Typing", type: "in", a: "FIRE" },
            43: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§©à§« à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 35 },
            44: { t: "'BANGLA' à¦¶à¦¬à§à¦¦à§‡ à¦•à§Ÿà¦Ÿà¦¿ à¦…à¦•à§à¦·à¦°?", cat: "Logic", type: "in", a: "6" },
            45: { t: "à§« x à§¨ = à¦•à¦¤?", cat: "Math", type: "in", a: "10" },
            46: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'FAST'", cat: "Typing", type: "in", a: "FAST" },
            47: { t: "à§§ à¦¡à¦œà¦¨ à¦•à§Ÿà¦Ÿà¦¿?", cat: "GK", type: "in", a: "12" },
            48: { t: "à§ª - à§ª = à¦•à¦¤?", cat: "Math", type: "in", a: "0" },
            49: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'WIN'", cat: "Typing", type: "in", a: "WIN" },
            50: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§«à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨!", cat: "Milestone", type: "tap", target: 50 },
            51: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'GALAXY'", cat: "Typing", type: "in", a: "GALAXY" },
            52: { t: "à§¨à§« + à§¨à§« + à§¨à§« = à¦•à¦¤?", cat: "Math", type: "in", a: "75" },
            53: { t: "à¦Ÿà¦®à§‡à¦Ÿà§‹à¦° à¦°à¦‚ à¦•à§€? (à¦¬à¦¾à¦‚à¦²à¦¾à¦¯à¦¼)", cat: "GK", type: "in", a: "à¦²à¦¾à¦²" },
            54: { t: "à¦•à§‹à¦¨ à¦ªà§à¦°à¦¾à¦£à§€à¦° à¦¶à§à¦à§œ à¦†à¦›à§‡? (à¦¬à¦¾à¦‚à¦²à¦¾à¦¯à¦¼)", cat: "Animals", type: "in", a: "à¦¹à¦¾à¦¤à¦¿" },
            55: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'LEGEND'", cat: "Typing", type: "in", a: "LEGEND" },
            56: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§¬à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 60 },
            57: { t: "à§¨à§¦à§¦ - à§«à§¦ - à§«à§¦ = ?", cat: "Math", type: "in", a: "100" },
            58: { t: "'COW' à¦‰à¦²à§à¦Ÿà§‹ à¦²à¦¿à¦–à§à¦¨", cat: "Logic", type: "in", a: "WOC" },
            59: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'MASTER'", cat: "Typing", type: "in", a: "MASTER" },
            60: { t: "à§¨, à§ª, à§¬, ... à¦ªà¦°à§‡à¦° à¦¸à¦‚à¦–à§à¦¯à¦¾à¦Ÿà¦¿ à¦•à§€?", cat: "Sequence", type: "in", a: "8" },
            61: { t: "à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶à§‡à¦° à¦œà¦¾à¦¤à§€à¦¯à¦¼ à¦ªà¦¶à§?", cat: "GK", type: "in", a: "à¦¬à¦¾à¦˜" },
            62: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'CYBER'", cat: "Typing", type: "in", a: "CYBER" },
            63: { t: "à§­ x à§­ = à¦•à¦¤?", cat: "Math", type: "in", a: "49" },
            64: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§¬à§« à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 65 },
            65: { t: "'HELLO' à¦®à¦¾à¦¨à§‡ à¦•à§€? (à¦¬à¦¾à¦‚à¦²à¦¾à¦¯à¦¼)", cat: "English", type: "in", a: "à¦“à¦¹à§‡" },
            66: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'POWER'", cat: "Typing", type: "in", a: "POWER" },
            67: { t: "à§«à§¦à§¦ / à§« = à¦•à¦¤?", cat: "Math", type: "in", a: "100" },
            68: { t: "à¦«à¦²à§‡à¦° à¦°à¦¾à¦œà¦¾ à¦•à§€? (à¦¬à¦¾à¦‚à¦²à¦¾à¦¯à¦¼)", cat: "GK", type: "in", a: "à¦†à¦®" },
            69: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'SUPER'", cat: "Typing", type: "in", a: "SUPER" },
            70: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§­à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Speed", type: "tap", target: 70 },
            71: { t: "à§§à§¨ + à§§à§© = ?", cat: "Math", type: "in", a: "25" },
            72: { t: "'SUN' à¦‰à¦²à§à¦Ÿà§‹ à¦²à¦¿à¦–à§à¦¨", cat: "Logic", type: "in", a: "NUS" },
            73: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'NIGHT'", cat: "Typing", type: "in", a: "NIGHT" },
            74: { t: "à§§ à¦¸à¦ªà§à¦¤à¦¾à¦¹à§‡ à¦•à¦¤ à¦¦à¦¿à¦¨?", cat: "Time", type: "in", a: "7" },
            75: { t: "à§§à§¦, à§¨à§¦, à§©à§¦, ... à¦ªà¦°à§‡à¦° à¦¸à¦‚à¦–à§à¦¯à¦¾ à¦•à§€?", cat: "Sequence", type: "in", a: "40" },
            76: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'LIGHT'", cat: "Typing", type: "in", a: "LIGHT" },
            77: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§­à§« à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Endurance", type: "tap", target: 75 },
            78: { t: "à§® x à§© = ?", cat: "Math", type: "in", a: "24" },
            79: { t: "à¦¦à§à¦§à§‡à¦° à¦°à¦‚ à¦•à§€? (à¦¬à¦¾à¦‚à¦²à¦¾à¦¯à¦¼)", cat: "GK", type: "in", a: "à¦¸à¦¾à¦¦à¦¾" },
            80: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'SHINE'", cat: "Typing", type: "in", a: "SHINE" },
            81: { t: "à§«à§¦ + à§«à§¦ + à§«à§¦ + à§«à§¦ = ?", cat: "Math", type: "in", a: "200" },
            82: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'DREAM'", cat: "Typing", type: "in", a: "DREAM" },
            83: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§®à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Endurance", type: "tap", target: 80 },
            84: { t: "à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶à§‡ à¦•à§Ÿà¦Ÿà¦¿ à¦‹à¦¤à§?", cat: "GK", type: "in", a: "6" },
            85: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'SMART'", cat: "Typing", type: "in", a: "SMART" },
            86: { t: "à§¬ x à§¬ = ?", cat: "Math", type: "in", a: "36" },
            87: { t: "'BIRD' à¦‰à¦²à§à¦Ÿà§‹ à¦²à¦¿à¦–à§à¦¨", cat: "Logic", type: "in", a: "DRIB" },
            88: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'CLOUD'", cat: "Typing", type: "in", a: "CLOUD" },
            89: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§¯à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Endurance", type: "tap", target: 90 },
            90: { t: "à§§à§¦à§¦à§¦ - à§¯à§¦à§¦ = ?", cat: "Math", type: "in", a: "100" },
            91: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'WORLD'", cat: "Typing", type: "in", a: "WORLD" },
            92: { t: "à§«, à§§à§¦, à§§à§«, à§¨à§¦, ... à¦ªà¦°à§‡à¦° à¦¸à¦‚à¦–à§à¦¯à¦¾à¦Ÿà¦¿?", cat: "Sequence", type: "in", a: "25" },
            93: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'SPACE'", cat: "Typing", type: "in", a: "SPACE" },
            94: { t: "à§¯ x à§¯ = à¦•à¦¤?", cat: "Math", type: "in", a: "81" },
            95: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§¯à§« à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨", cat: "Endurance", type: "tap", target: 95 },
            96: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'FUTURE'", cat: "Typing", type: "in", a: "FUTURE" },
            97: { t: "à§«à§¦ x à§¨ = ?", cat: "Math", type: "in", a: "100" },
            98: { t: "à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨ 'VICTORY'", cat: "Typing", type: "in", a: "VICTORY" },
            99: { t: "'LEVEL' à¦‰à¦²à§à¦Ÿà§‹ à¦²à¦¿à¦–à§à¦¨", cat: "Logic", type: "in", a: "LEVEL" },
            100: { t: "à¦¬à§ƒà¦¤à§à¦¤à§‡ à§§à§¦à§¦ à¦¬à¦¾à¦° à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨!", cat: "Final Boss", type: "tap", target: 100 }
        };

        function enterGame() {
            document.getElementById('splash').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('app').style.display = 'flex';
                setTimeout(() => document.getElementById('app').style.opacity = '1', 50);
                loadLevel();
            }, 500);
        }

        function loadLevel() {
            if (level > 100) {
                document.querySelector('.game-card').innerHTML = `
                    <div style="text-align:center; padding: 40px 0;">
                        <i class="fas fa-trophy" style="font-size: 4rem; color: #fbbf24; margin-bottom: 20px;"></i>
                        <h2 style="color:white; margin-bottom:10px;">LEGENDARY!</h2>
                        <p style="color:var(--text-muted);">You completed all 100 levels.</p>
                        <button class="btn btn-primary" onclick="resetGame()" style="margin-top:20px;">Replay</button>
                    </div>`;
                document.getElementById('progress').style.width = '100%';
                burstConfetti();
                return;
            }

            document.getElementById('lvl-display').innerText = `LVL ${level}`;
            document.getElementById('progress').style.width = `${level}%`;

            const task = levels[level];
            document.getElementById('q-category').innerText = task.cat || "Puzzle";
            document.getElementById('q-text').innerText = task.t;

            const area = document.getElementById('game-interface');
            const btnContainer = document.getElementById('btn-container');

            area.innerHTML = '';

            if (task.type === 'in') {
                currentAns = task.a;
                btnContainer.classList.remove('hidden');
                area.innerHTML = `<div class="input-wrapper"><input type="text" id="ans" placeholder="Type answer..." autocomplete="off"></div>`;
                const input = document.getElementById('ans');
                setTimeout(() => input.focus(), 100);
                input.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkAnswer(); });

            } else if (task.type === 'tap') {
                taps = 0;
                btnContainer.classList.add('hidden');
                area.innerHTML = `<div id="tap-btn" onclick="handleTap(${task.target})">0</div>`;
            }
        }

        function checkAnswer() {
            const val = document.getElementById('ans').value.trim().toUpperCase();
            if (val === currentAns.toUpperCase()) {
                success();
            } else {
                if(navigator.vibrate) navigator.vibrate(200);
                document.getElementById('modal-overlay').style.display = 'flex';
            }
        }

        function handleTap(target) {
            taps++;
            const btn = document.getElementById('tap-btn');
            btn.innerText = taps;
            btn.style.transform = "scale(0.9)";
            setTimeout(() => btn.style.transform = "scale(1)", 50);

            if (taps >= target) {
                btn.style.background = "var(--primary)";
                btn.style.borderColor = "var(--primary)";
                success();
            }
        }

        function success() {
            showToast("Awesome!");
            burstConfetti();
            if(navigator.vibrate) navigator.vibrate(50);
            
            level++;
            localStorage.setItem('qb_lvl', level);

            setTimeout(() => {
                loadLevel();
            }, 800);
        }

        function getHint() {
            window.open(LINKS.HINT, '_blank');
            setTimeout(() => {
                let hint = currentAns ? `First Letter: ${currentAns.charAt(0)}` : "Easy! Think again.";
                showToast(hint);
            }, 1000);
        }

        function skipLevel() {
            const btn = document.querySelector('.btn-ad');
            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Loading...`;
            
            setTimeout(() => {
                window.open(LINKS.SKIP, '_blank');
                closeModal();
                btn.innerHTML = `<i class="fas fa-video"></i> Watch Ad & Skip`;
                showToast("Level Skipped!");
                
                level++;
                localStorage.setItem('qb_lvl', level);
                
                setTimeout(loadLevel, 500);
            }, 1000);
        }

        function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }
        function showToast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            t.classList.add('active');
            setTimeout(() => t.classList.remove('active'), 2500);
        }
        function resetGame() {
            if(confirm("Reset progress?")) {
                localStorage.setItem('qb_lvl', 1);
                level = 1;
                loadLevel();
            }
        }

        function burstConfetti() {
            const c = document.getElementById('confetti-canvas');
            const x = c.getContext('2d');
            c.width = window.innerWidth; c.height = window.innerHeight;
            let p = [];
            for(let i=0; i<60; i++) p.push({
                x: c.width/2, y: c.height/2, vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
                color: `hsl(${Math.random()*360}, 100%, 50%)`, life: 100
            });
            function draw() {
                x.clearRect(0,0,c.width,c.height);
                p.forEach((k,i) => {
                    k.x+=k.vx; k.y+=k.vy; k.life--;
                    x.fillStyle = k.color; x.globalAlpha = k.life/100;
                    x.beginPath(); x.arc(k.x, k.y, 4, 0, Math.PI*2); x.fill();
                    if(k.life<=0) p.splice(i,1);
                });
                if(p.length) requestAnimationFrame(draw);
            }
            draw();
        }
    </script>
</body>
</html>